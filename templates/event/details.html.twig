{% extends 'base.html.twig' %}

{% block title %}Sortie: {{ event.name }}{% endblock %}

{% block body %}

<div class="container mt-5">
    <div class="text-center">
        <h2>Afficher une sortie</h2>
    </div>
    {% if event.state.value == "CANCELED" %}
        <h4 class="text-danger">Cette sortie a été annulé</h4>
    {% endif %}
    <div class="row mt-5">
        <div class="col-9">
            <div class="row">
                <div class="col">
                    <div class="row mb-3">
                        <label for="colFormLabel" class="col-sm-6 col-form-label text-primary">Nom de la sortie: </label>
                        <div class="col-sm-6">
                            <label class="col-form-label">{{ event.name }}</label>
                        </div>

                        <label for="colFormLabel" class="col-sm-6 col-form-label text-primary">Date et heure de la sortie: </label>
                        <div class="col-sm-6">
                            <label class="col-form-label">{{ event.startDateTime|date("d/m/Y") }}</label>
                        </div>

                        <label for="colFormLabel" class="col-sm-6 col-form-label text-primary">Date limite d'inscription: </label>
                        <div class="col-sm-6">
                            <label class="col-form-label">{{ event.limitDateInscription|date("d/m/Y") }}</label>
                        </div>

                        <label for="colFormLabel" class="col-sm-6 col-form-label text-primary">Nombre de places: </label>
                        <div class="col-sm-6">
                            <label class="col-form-label">{{ event.users|length }}</label>
                        </div>

                        <label for="colFormLabel" class="col-sm-6 col-form-label text-primary">Durée: </label>
                        <div class="col-sm-6">
                            <label class="col-form-label">{{ event.getDuration }}</label>
                        </div>

                        <label for="descriptionEvent" class="col-sm-6 col-form-label text-primary">Description et infos: </label>
                        <div class="col-sm-6">
                            <textarea class="form-control" id="descriptionEvent" rows="4" disabled>{{ event.eventInfo }}</textarea>
                        </div>
                    </div>
                </div>
                <div class="col">
                    <div class="row mb-3">
                        <label for="colFormLabel" class="col-sm-6 col-form-label text-primary">Ville: </label>
                        <div class="col-sm-6">
                            <label class="col-form-label">{{ event.eventLocation.city.name }}</label>
                        </div>

                        <label for="colFormLabel" class="col-sm-6 col-form-label text-primary">Lieu: </label>
                        <div class="col-sm-6">
                            <label class="col-form-label">{{ event.eventLocation.name }}</label>
                        </div>

                        <label for="colFormLabel" class="col-sm-6 col-form-label text-primary">Rue: </label>
                        <div class="col-sm-6">
                            <label class="col-form-label">{{ event.eventLocation.street }}</label>
                        </div>

                        <label for="colFormLabel" class="col-sm-6 col-form-label text-primary">code postal: </label>
                        <div class="col-sm-6">
                            <label class="col-form-label">{{ event.eventLocation.city.zipcode }}</label>
                        </div>

                        <label for="colFormLabel" class="col-sm-6 col-form-label text-primary">latitude: </label>
                        <div class="col-sm-6">
                            <label class="col-form-label">{{ event.eventLocation.latitude }}</label>
                        </div>

                        <label for="colFormLabel" class="col-sm-6 col-form-label text-primary">longitude: </label>
                        <div class="col-sm-6">
                            <label class="col-form-label">{{ event.eventLocation.longitude }}</label>
                        </div>
                    </div>
                </div>
            </div>
            {% if event.cancellationReason != null and event.state.value == "CANCELED" %}
            <label for="descriptionEvent" class="col-sm-6 col-form-label text-primary">Motif d'annulation: </label>
            <div class="col-sm-6">
                <textarea class="form-control" id="descriptionEvent" rows="4" disabled>{{ event.cancellationReason }}</textarea>
            </div>
            {% endif %}
        </div>
        <div class="col">
            <table class="table ">
                <thead>
                <tr>
                    <th scope="col">Pseudo</th>
                    <th scope="col">Nom</th>
                </tr>
                </thead>
                <tbody>
                {% for user in event.users %}
                    <tr>
                        {% if is_granted('ROLE_ADMIN') or event.user == app.user %}
                            <td><a href="{{ app.request.getBaseURL() }}/profile/{{ event.user.id }}">{{ user.username }}</a></td>
                        {% else %}
                            <td>{{ user.username }}</td>
                        {% endif %}
                        <td>{{ user.getFullName }}</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>

{% endblock %}
